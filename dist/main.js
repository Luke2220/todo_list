(()=>{"use strict";const e=(()=>{const e=[];return{addProject:(t,n,d,i)=>{let a=((e,t,n,d)=>{const i=[];return{editProject:(i,a,l,o)=>{e=i,t=a,n=l,d=o},getName:()=>e,getPriority:()=>t,getDate:()=>n,getDesc:()=>d,addTodo:(e,t,n,d)=>{const a=((e,t,n,d)=>({getName:()=>e,getDesc:()=>d,getDate:()=>n,getPriority:()=>t,editProject:(i,a,l,o)=>{e=i,t=a,n=l,d=o}}))(e,t,n,d);return i.push(a),a},getTodos:()=>i,ourTodos:i,ourDiv:null,deleteTodo:e=>{i.forEach(((t,n)=>{t.getName()==e&&delete i[n]}))}}})(t,n,d,i);return e.push(a),a},removeProject:t=>{e.forEach(((n,d)=>{n==t&&delete e[d]}))},FindProject:t=>{e.forEach(((n,d)=>{if(n==t)return e[d]}))},getList:()=>e,selectedProject:void 0}})();function t(e,t){if(document.getElementsByClassName("editForm").length<=0){let a=document.createElement("form");a.classList.add("editForm"),document.createElement("p").textContent="Edit";let l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("name","title");let o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("name","desc");let r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("name","dueDate");let c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name","priority"),c.setAttribute("id","low");let s=document.createElement("input");s.setAttribute("type","radio"),s.setAttribute("name","priority"),s.setAttribute("id","med");let m=document.createElement("input");m.setAttribute("type","radio"),m.setAttribute("name","priority"),m.setAttribute("id","high");let u=document.createElement("input");return u.setAttribute("type","submit"),u.setAttribute("value","Save"),u.addEventListener("click",(e=>{e.preventDefault();const d=new FormData(a);var i;t.editProject(d.get("title"),d.get("priority"),d.get("dueDate"),d.get("desc")),(i=t).ourDiv.getElementsByClassName("title")[0].textContent=i.getName(),i.ourDiv.getElementsByClassName("desc")[0].textContent=i.getDesc(),i.ourDiv.getElementsByClassName("dueDate")[0].textContent=i.getDate(),n(a)})),a.appendChild(d()),a.appendChild(i("Edit Form:","title")),a.appendChild(d()),a.appendChild(l),a.appendChild(d()),a.appendChild(i("Edit Description:","desc")),a.appendChild(d()),a.appendChild(o),a.appendChild(d()),a.appendChild(i("Edit Due-Date:","dueDate")),a.appendChild(d()),a.appendChild(r),a.appendChild(d()),a.appendChild(c),a.appendChild(i("Low","dueDate")),a.appendChild(s),a.appendChild(i("High","dueDate")),a.appendChild(m),a.appendChild(i("Medium","dueDate")),a.appendChild(d()),a.appendChild(u),e.appendChild(a),a}n(document.getElementsByClassName("editForm")[0])}function n(e){e.remove()}function d(){return document.createElement("br")}function i(e,t){const n=document.createElement("label");return n.textContent=e,n.setAttribute("name",t),n}const a=document.getElementsByClassName("addProject")[0],l=document.getElementsByClassName("addTodo")[0],o=document.getElementsByClassName("projectList")[0],r=document.getElementsByClassName("todoList")[0],c=document.getElementsByClassName("projectForm")[0],s=document.getElementsByClassName("todoForm")[0],m=document.getElementsByClassName("projectSave")[0],u=document.getElementsByClassName("todoSave")[0];function p(n,d,i){let a=document.createElement("div");n.ourDiv=a;let l=document.createElement("p");l.textContent=n.getName(),l.classList.add("title");let o=document.createElement("div");o.classList.add("visibleForm","info"),l.addEventListener("click",(()=>{E(o)}));let r=document.createElement("p");r.textContent=n.getDesc(),r.classList.add("desc");let c=document.createElement("p");c.textContent=n.getDate(),c.classList.add("dueDate");let s=document.createElement("button");s.textContent="Edit",s.addEventListener("click",(()=>{t(a,n)}));let m=document.createElement("button");m.textContent="Delete",m.addEventListener("click",(()=>{e.selectedProject.deleteTodo(n.getName()),C(a)})),o.appendChild(r),o.appendChild(c),a.appendChild(l),a.appendChild(o),a.appendChild(s),a.appendChild(m),i.appendChild(a),E(d)}function C(e){e.remove()}function E(e){e.classList.toggle("visibleForm")}a.addEventListener("click",(()=>{E(c)})),l.addEventListener("click",(()=>{E(s)})),m.addEventListener("click",(n=>{n.preventDefault(),function(n,d,i,a){let l=document.createElement("div");n.ourDiv=l;let o=document.createElement("p");o.textContent=n.getName(),o.classList.add("title");let c=document.createElement("div");c.classList.add("visibleForm","info"),o.addEventListener("click",(()=>{var t;null!=(t=a)&&Array.from(t.children).forEach((e=>{e.remove()})),function(t){null!=e.selectedProject&&E(e.selectedProject.ourDiv.getElementsByClassName("info")[0]),e.selectedProject=t,t.ourTodos.forEach((e=>{p(e,s,r)}))}(n),E(c)}));let m=document.createElement("p");m.textContent=n.getDesc(),m.classList.add("desc");let u=document.createElement("p");u.textContent=n.getDate(),u.classList.add("dueDate");let g=document.createElement("button");g.textContent="Edit",g.addEventListener("click",(()=>{t(l,n)}));let h=document.createElement("button");h.textContent="Delete",h.addEventListener("click",(()=>{e.removeProject(n),C(l),function(e){for(;e.firstChild;)C(e.firstChild)}(r)})),c.appendChild(m),c.appendChild(u),l.appendChild(o),l.appendChild(c),l.appendChild(g),l.appendChild(h),i.appendChild(l),E(d)}(function(){let t=new FormData(c);return e.addProject(t.get("title"),t.get("priority"),t.get("dueDate"),t.get("desc"))}(),c,o,r)})),u.addEventListener("click",(t=>{t.preventDefault(),null!=e.selectedProject&&p(function(e){let t=new FormData(s);return e.addTodo(t.get("title"),t.get("priority"),t.get("dueDate"),t.get("desc"))}(e.selectedProject),s,r)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQ2hDK0YsRUFBU3RDLElBQUksU0FDYnNDLEVBQVN0QyxJQUFJLFlBQ2JzQyxFQUFTdEMsSUFBSSxXQUNic0MsRUFBU3RDLElBQUksU0FmRHVDLEdBQW9CekIsRUFBYUYsRUFBa0JDLE1BRW5FSSxFQUFZdEIsaUJBQWlCLFNBQVVpQyxJQUNyQ0EsRUFBTS9CLGlCQUNnQyxNQUFsQ3hELEVBQWVrQyxpQkFDakIyQyxFQWdCSixTQUF1QjNDLEdBQ25CLElBQUkrRCxFQUFXLElBQUl2QyxTQUFTZ0IsR0FPMUIsT0FOY3hDLEVBQWdCaEIsUUFDOUIrRSxFQUFTdEMsSUFBSSxTQUNic0MsRUFBU3RDLElBQUksWUFDYnNDLEVBQVN0QyxJQUFJLFdBQ2JzQyxFQUFTdEMsSUFBSSxTQXRCSndDLENBQWNuRyxFQUFla0MsaUJBQWtCd0MsRUFBVUYsTyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvcHJvamVjdF9tYW5hZ2VyLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9lZGl0X2Zvcm0uanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL2FkZF9wcm9qZWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwcm9qZWN0cyA9IChuYW1lLCBwcmlvcml0eSwgZHVlRGF0ZSwgZGVzYykgPT4ge1xuICBjb25zdCBnZXROYW1lID0gKCkgPT4ge1xuICAgIHJldHVybiBuYW1lO1xuICB9O1xuICBjb25zdCBnZXRQcmlvcml0eSA9ICgpID0+IHtcbiAgICByZXR1cm4gcHJpb3JpdHk7XG4gIH07XG4gIGNvbnN0IGdldERhdGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGR1ZURhdGU7XG4gIH07XG4gIGNvbnN0IGdldERlc2MgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGRlc2M7XG4gIH07XG5cbiAgY29uc3Qgb3VyVG9kb3MgPSBbXTtcbiAgY29uc3Qgb3VyRGl2ID0gbnVsbDtcblxuICBjb25zdCBhZGRUb2RvID0gKG5hbWUsIHByaW9yaXR5LCBkdWVEYXRlLCBkZXNjKSA9PiB7XG4gICAgY29uc3QgbmV3VG9kbyA9IHRvZG8obmFtZSwgcHJpb3JpdHksIGR1ZURhdGUsIGRlc2MpO1xuICAgIG91clRvZG9zLnB1c2gobmV3VG9kbyk7XG4gICAgcmV0dXJuIG5ld1RvZG87XG4gIH07XG5cbiAgY29uc3QgZGVsZXRlVG9kbyA9ICh0b2RvTmFtZSkgPT4ge1xuICAgIG91clRvZG9zLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcbiAgICAgIGlmIChlbGVtZW50LmdldE5hbWUoKSA9PSB0b2RvTmFtZSkge1xuICAgICAgICAgXG4gICAgICAgIGRlbGV0ZSBvdXJUb2Rvc1tpXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRUb2RvcyA9ICgpID0+IHtcbiAgICByZXR1cm4gb3VyVG9kb3M7XG4gIH07XG5cbiAgY29uc3QgZWRpdFByb2plY3QgPSAoX25hbWUsIF9wcmlvcml0eSwgX2R1ZURhdGUsIF9kZXNjKSA9PiB7XG4gICBcbiAgICBuYW1lID0gX25hbWU7XG4gICAgcHJpb3JpdHkgPSBfcHJpb3JpdHk7XG4gICAgZHVlRGF0ZSA9IF9kdWVEYXRlO1xuICAgIGRlc2MgPSBfZGVzYztcbiAgIFxuICB9O1xuICByZXR1cm4ge1xuICAgIGVkaXRQcm9qZWN0LFxuICAgIGdldE5hbWUsXG4gICAgZ2V0UHJpb3JpdHksXG4gICAgZ2V0RGF0ZSxcbiAgICBnZXREZXNjLFxuICAgIGFkZFRvZG8sXG4gICAgZ2V0VG9kb3MsXG4gICAgb3VyVG9kb3MsXG4gICAgb3VyRGl2LFxuICAgIGRlbGV0ZVRvZG8sXG4gIH07XG59O1xuXG5jb25zdCB0b2RvID0gKG5hbWUsIHByaW9yaXR5LCBkdWVEYXRlLCBkZXNjKSA9PiB7XG4gIGNvbnN0IGdldE5hbWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH07XG4gIGNvbnN0IGdldFByaW9yaXR5ID0gKCkgPT4ge1xuICAgIHJldHVybiBwcmlvcml0eTtcbiAgfTtcbiAgY29uc3QgZ2V0RGF0ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZHVlRGF0ZTtcbiAgfTtcbiAgY29uc3QgZ2V0RGVzYyA9ICgpID0+IHtcbiAgICByZXR1cm4gZGVzYztcbiAgfTtcblxuICBjb25zdCBlZGl0UHJvamVjdCA9IChfbmFtZSwgX3ByaW9yaXR5LCBfZHVlRGF0ZSwgX2Rlc2MpID0+IHtcbiAgICBuYW1lID0gX25hbWU7XG4gICAgcHJpb3JpdHkgPSBfcHJpb3JpdHk7XG4gICAgZHVlRGF0ZSA9IF9kdWVEYXRlO1xuICAgIGRlc2MgPSBfZGVzYztcbiAgIFxuICB9O1xuICByZXR1cm4ge2dldE5hbWUsZ2V0RGVzYyxnZXREYXRlLGdldFByaW9yaXR5LGVkaXRQcm9qZWN0fVxufTtcblxuZXhwb3J0IHsgcHJvamVjdHMgfTtcbiIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcblxuY29uc3QgcHJvamVjdE1hbmFnZXIgPSAoKCkgPT4ge1xuICBjb25zdCBwcm9qZWN0TGlzdCA9IFtdO1xuICBsZXQgc2VsZWN0ZWRQcm9qZWN0O1xuXG4gIGNvbnN0IGdldExpc3QgPSAoKSA9PiBwcm9qZWN0TGlzdDtcblxuICBjb25zdCBhZGRQcm9qZWN0ID0gKG5hbWUsIHByaW9yaXR5LCBkdWVEYXRlLCBkZXNjKSA9PiB7XG4gICAgbGV0IG5ld1AgPSBwcm9qZWN0cyhuYW1lLCBwcmlvcml0eSwgZHVlRGF0ZSwgZGVzYyk7XG4gICAgcHJvamVjdExpc3QucHVzaChuZXdQKTtcbiAgICByZXR1cm4gbmV3UDtcbiAgfTtcblxuICBjb25zdCBGaW5kUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gICAgcHJvamVjdExpc3QuZm9yRWFjaCgoZWxlbWVudCwgaSkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQgPT0gcHJvamVjdCkge1xuICAgICAgICByZXR1cm4gcHJvamVjdExpc3RbaV07XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gICAgcHJvamVjdExpc3QuZm9yRWFjaCgoZWxlbWVudCwgaSkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQgPT0gcHJvamVjdCkge1xuICAgICAgICBkZWxldGUgcHJvamVjdExpc3RbaV07XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiB7IGFkZFByb2plY3QsIHJlbW92ZVByb2plY3QsIEZpbmRQcm9qZWN0LCBnZXRMaXN0LCBzZWxlY3RlZFByb2plY3QgfTtcbn0pKCk7XG5leHBvcnQgeyBwcm9qZWN0TWFuYWdlciB9O1xuIiwiZnVuY3Rpb24gYWRkRWRpdEZvcm0oZGl2LHByb2plY3RUb0VkaXQpe1xuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlZGl0Rm9ybScpLmxlbmd0aCA8PSAwKSB7XG4gICAgbGV0IGVkaXRGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgIGVkaXRGb3JtLmNsYXNzTGlzdC5hZGQoJ2VkaXRGb3JtJyk7XG5cbiAgICBjb25zdCBlZGl0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgZWRpdFRpdGxlLnRleHRDb250ZW50ID0gJ0VkaXQnO1xuXG4gICAgbGV0IHRpdGxlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0aXRsZUJveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCd0ZXh0Jyk7XG4gICAgdGl0bGVCb3guc2V0QXR0cmlidXRlKCduYW1lJywndGl0bGUnKTtcblxuXG4gICAgbGV0IGRlc2NCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGRlc2NCb3guc2V0QXR0cmlidXRlKCd0eXBlJywndGV4dCcpO1xuICAgIGRlc2NCb3guc2V0QXR0cmlidXRlKCduYW1lJywnZGVzYycpO1xuXG5cbiAgICBsZXQgZGF0ZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgZGF0ZUJveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCd0ZXh0Jyk7XG4gICAgZGF0ZUJveC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCdkdWVEYXRlJyk7XG4gIFxuXG4gICAgbGV0IHJhZGlvTG93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICByYWRpb0xvdy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCdyYWRpbycpO1xuICAgIHJhZGlvTG93LnNldEF0dHJpYnV0ZSgnbmFtZScsJ3ByaW9yaXR5Jyk7XG4gICAgcmFkaW9Mb3cuc2V0QXR0cmlidXRlKCdpZCcsJ2xvdycpO1xuICAgIFxuXG4gICAgbGV0IHJhZGlvTWVkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICByYWRpb01lZC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCdyYWRpbycpO1xuICAgIHJhZGlvTWVkLnNldEF0dHJpYnV0ZSgnbmFtZScsJ3ByaW9yaXR5Jyk7XG4gICAgcmFkaW9NZWQuc2V0QXR0cmlidXRlKCdpZCcsJ21lZCcpO1xuICBcblxuICAgIGxldCByYWRpb0hpZ2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHJhZGlvSGlnaC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCdyYWRpbycpO1xuICAgIHJhZGlvSGlnaC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCdwcmlvcml0eScpO1xuICAgIHJhZGlvSGlnaC5zZXRBdHRyaWJ1dGUoJ2lkJywnaGlnaCcpO1xuXG4gICAgbGV0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgc3VibWl0QnRuLnNldEF0dHJpYnV0ZSgndHlwZScsJ3N1Ym1pdCcpO1xuICAgIHN1Ym1pdEJ0bi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywnU2F2ZScpO1xuICAgIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IGdldEZvcm1EYXRhKGVkaXRGb3JtKTtcbiAgICAgICAgcHJvamVjdFRvRWRpdC5lZGl0UHJvamVjdCggZm9ybURhdGEuZ2V0KFwidGl0bGVcIiksXG4gICAgICAgIGZvcm1EYXRhLmdldChcInByaW9yaXR5XCIpLFxuICAgICAgICBmb3JtRGF0YS5nZXQoXCJkdWVEYXRlXCIpLFxuICAgICAgICBmb3JtRGF0YS5nZXQoXCJkZXNjXCIpKTtcbiAgICAgICAgdXBkYXRlRG9tKHByb2plY3RUb0VkaXQpO1xuICAgICAgICByZW1vdmVGb3JtKGVkaXRGb3JtKTtcbiAgICB9KTtcblxuICAgIFxuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUJSKCkpO1xuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUxhYmVsKCdFZGl0IEZvcm06JywgJ3RpdGxlJykpO1xuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUJSKCkpO1xuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKHRpdGxlQm94KTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVCUigpKTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVMYWJlbCgnRWRpdCBEZXNjcmlwdGlvbjonLCAnZGVzYycpKTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVCUigpKTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChkZXNjQm94KTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVCUigpKTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVMYWJlbCgnRWRpdCBEdWUtRGF0ZTonLCAnZHVlRGF0ZScpKTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVCUigpKTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChkYXRlQm94KTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVCUigpKTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChyYWRpb0xvdyk7XG4gICAgZWRpdEZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlTGFiZWwoJ0xvdycsICdkdWVEYXRlJykpOyAgXG4gICAgZWRpdEZvcm0uYXBwZW5kQ2hpbGQocmFkaW9NZWQpOyBcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZChjcmVhdGVMYWJlbCgnSGlnaCcsICdkdWVEYXRlJykpO1xuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKHJhZGlvSGlnaCk7XG4gICAgZWRpdEZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlTGFiZWwoJ01lZGl1bScsICdkdWVEYXRlJykpO1xuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUJSKCkpO1xuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKHN1Ym1pdEJ0bik7XG4gICAgZGl2LmFwcGVuZENoaWxkKGVkaXRGb3JtKTtcbiAgICByZXR1cm4gZWRpdEZvcm07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVtb3ZlRm9ybShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlZGl0Rm9ybScpWzBdKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUZvcm0oZm9ybSl7XG4gICAgZm9ybS5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gZ2V0Rm9ybURhdGEoZm9ybSl7XG4gICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xuICAgIHJldHVybiBmb3JtZGF0YTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQlIoKXtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGFiZWwodGV4dCwgZWxlKXtcbiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgbGFiZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnbmFtZScsIGVsZSk7XG4gICAgcmV0dXJuIGxhYmVsO1xuICAgIFxufVxuXG5mdW5jdGlvbiB1cGRhdGVEb20ocHJvamVjdCl7XG4gICAgcHJvamVjdC5vdXJEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGl0bGUnKVswXS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0TmFtZSgpO1xuICAgIHByb2plY3Qub3VyRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Rlc2MnKVswXS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0RGVzYygpO1xuICAgIHByb2plY3Qub3VyRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2R1ZURhdGUnKVswXS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0RGF0ZSgpO1xuICB9XG5cbmV4cG9ydCB7YWRkRWRpdEZvcm0sIGdldEZvcm1EYXRhfSIsImltcG9ydCB7IHByb2plY3RNYW5hZ2VyIH0gZnJvbSBcIi4vcHJvamVjdF9tYW5hZ2VyXCI7XG5pbXBvcnQge2FkZEVkaXRGb3JtfSBmcm9tIFwiLi9lZGl0X2Zvcm1cIjtcblxuY29uc3QgbmV3UHJvamVjdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhZGRQcm9qZWN0XCIpWzBdO1xuY29uc3QgbmV3VG9kb0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhZGRUb2RvXCIpWzBdO1xuY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwcm9qZWN0TGlzdFwiKVswXTtcbmNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidG9kb0xpc3RcIilbMF07XG5jb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwcm9qZWN0Rm9ybVwiKVswXTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRvZG9Gb3JtXCIpWzBdO1xuY29uc3QgcHJvamVjdFNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicHJvamVjdFNhdmVcIilbMF07XG5jb25zdCB0b2RvU2F2ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0b2RvU2F2ZVwiKVswXTtcblxubmV3UHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICB0b2dnbGVWaXNpYmxlKHByb2plY3RGb3JtKTtcbn0pO1xubmV3VG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICB0b2dnbGVWaXNpYmxlKHRvZG9Gb3JtKTtcbn0pO1xuXG5wcm9qZWN0U2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGFkZFByb2plY3REb20oY3JlYXRlTmV3UHJvamVjdCgpLCBwcm9qZWN0Rm9ybSwgcHJvamVjdENvbnRhaW5lciwgdG9kb0NvbnRhaW5lcik7XG59KTtcbnRvZG9TYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKHByb2plY3RNYW5hZ2VyLnNlbGVjdGVkUHJvamVjdCAhPSBudWxsKSB7XG4gICAgYWRkVG9kb0RvbShjcmVhdGVOZXdUb2RvKHByb2plY3RNYW5hZ2VyLnNlbGVjdGVkUHJvamVjdCksIHRvZG9Gb3JtLCB0b2RvQ29udGFpbmVyKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZU5ld1Byb2plY3QoKSB7XG4gIGxldCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YShwcm9qZWN0Rm9ybSk7XG4gIGNvbnN0IG5ld1Byb2plY3QgPSBwcm9qZWN0TWFuYWdlci5hZGRQcm9qZWN0KFxuICAgIGZvcm1kYXRhLmdldChcInRpdGxlXCIpLFxuICAgIGZvcm1kYXRhLmdldChcInByaW9yaXR5XCIpLFxuICAgIGZvcm1kYXRhLmdldChcImR1ZURhdGVcIiksXG4gICAgZm9ybWRhdGEuZ2V0KFwiZGVzY1wiKVxuICApO1xuXG5yZXR1cm4gbmV3UHJvamVjdDsgIFxufVxuXG5mdW5jdGlvbiBjcmVhdGVOZXdUb2RvKHNlbGVjdGVkUHJvamVjdCkge1xuICAgIGxldCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSh0b2RvRm9ybSk7XG4gICAgY29uc3QgbmV3VG9kbyA9IHNlbGVjdGVkUHJvamVjdC5hZGRUb2RvKFxuICAgICAgZm9ybWRhdGEuZ2V0KFwidGl0bGVcIiksXG4gICAgICBmb3JtZGF0YS5nZXQoXCJwcmlvcml0eVwiKSxcbiAgICAgIGZvcm1kYXRhLmdldChcImR1ZURhdGVcIiksXG4gICAgICBmb3JtZGF0YS5nZXQoXCJkZXNjXCIpXG4gICAgKTtcbiAgICAgIHJldHVybiBuZXdUb2RvO1xufVxuXG5mdW5jdGlvbiBhZGRQcm9qZWN0RG9tKHByb2plY3QsIGZvcm0sIGRvbUNvbnRhaW5lciwgY29udGFpbmVyVG9DbGVhcikge1xuICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcHJvamVjdC5vdXJEaXYgPSBkaXY7XG5cbiAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIHRpdGxlLnRleHRDb250ZW50ID0gcHJvamVjdC5nZXROYW1lKCk7XG4gIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ3RpdGxlJyk7XG5cbiAgbGV0IGRldGFpbGVkSW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRldGFpbGVkSW5mby5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZUZvcm1cIiwgXCJpbmZvXCIpO1xuIFxuXG4gIHRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2xlYXJEb21DaGlsZHJlbihjb250YWluZXJUb0NsZWFyKTtcbiAgICBvcGVuUHJvamVjdChwcm9qZWN0KTtcbiAgICB0b2dnbGVWaXNpYmxlKGRldGFpbGVkSW5mbyk7XG4gIH0pO1xuXG4gIGxldCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGRlc2MudGV4dENvbnRlbnQgPSBwcm9qZWN0LmdldERlc2MoKTtcbiAgZGVzYy5jbGFzc0xpc3QuYWRkKCdkZXNjJyk7XG5cbiAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgZHVlRGF0ZS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0RGF0ZSgpO1xuICBkdWVEYXRlLmNsYXNzTGlzdC5hZGQoJ2R1ZURhdGUnKTtcblxuICBsZXQgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGVkaXRCdG4udGV4dENvbnRlbnQgPSBcIkVkaXRcIjtcblxuICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBhZGRFZGl0Rm9ybShkaXYscHJvamVjdCk7ICAgXG4gICB9KTtcbiAgICBcbiAgICBcblxuICBsZXQgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGVcIjtcbiAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJvamVjdE1hbmFnZXIucmVtb3ZlUHJvamVjdChwcm9qZWN0KTtcbiAgICByZW1vdmVEb20oZGl2KTtcbiAgXG4gICAgcmVtb3ZlQWxsQ2hpbGROb2Rlcyh0b2RvQ29udGFpbmVyKTtcbiAgfSk7XG5cbiAgZGV0YWlsZWRJbmZvLmFwcGVuZENoaWxkKGRlc2MpO1xuICBkZXRhaWxlZEluZm8uYXBwZW5kQ2hpbGQoZHVlRGF0ZSk7XG5cbiAgZGl2LmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgZGl2LmFwcGVuZENoaWxkKGRldGFpbGVkSW5mbyk7XG4gIGRpdi5hcHBlbmRDaGlsZChlZGl0QnRuKTtcbiAgZGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gIGRvbUNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpO1xuICB0b2dnbGVWaXNpYmxlKGZvcm0pO1xufVxuXG5cbmZ1bmN0aW9uIGFkZFRvZG9Eb20odG9kbywgZm9ybSwgZG9tQ29udGFpbmVyKSB7XG4gIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0b2RvLm91ckRpdiA9IGRpdjtcblxuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgdGl0bGUudGV4dENvbnRlbnQgPSB0b2RvLmdldE5hbWUoKTtcbiAgdGl0bGUuY2xhc3NMaXN0LmFkZCgndGl0bGUnKTtcblxuICBsZXQgZGV0YWlsZWRJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGV0YWlsZWRJbmZvLmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlRm9ybVwiLCBcImluZm9cIik7XG4gXG5cblxuICB0aXRsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHRvZ2dsZVZpc2libGUoZGV0YWlsZWRJbmZvKTtcbiAgfSk7XG5cbiAgbGV0IGRlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgZGVzYy50ZXh0Q29udGVudCA9IHRvZG8uZ2V0RGVzYygpO1xuICBkZXNjLmNsYXNzTGlzdC5hZGQoJ2Rlc2MnKTtcblxuICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBkdWVEYXRlLnRleHRDb250ZW50ID0gdG9kby5nZXREYXRlKCk7XG4gIGR1ZURhdGUuY2xhc3NMaXN0LmFkZCgnZHVlRGF0ZScpO1xuXG4gIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgZWRpdEJ0bi50ZXh0Q29udGVudCA9IFwiRWRpdFwiO1xuICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XG4gICAgYWRkRWRpdEZvcm0oZGl2LHRvZG8pOyAgXG4gIH0pXG5cbiAgbGV0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHByb2plY3RNYW5hZ2VyLnNlbGVjdGVkUHJvamVjdC5kZWxldGVUb2RvKHRvZG8uZ2V0TmFtZSgpKTtcbiAgICByZW1vdmVEb20oZGl2KTtcbiAgfSk7XG5cbiAgZGV0YWlsZWRJbmZvLmFwcGVuZENoaWxkKGRlc2MpO1xuICBkZXRhaWxlZEluZm8uYXBwZW5kQ2hpbGQoZHVlRGF0ZSk7XG5cbiAgZGl2LmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgZGl2LmFwcGVuZENoaWxkKGRldGFpbGVkSW5mbyk7XG4gIGRpdi5hcHBlbmRDaGlsZChlZGl0QnRuKTtcbiAgZGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gIGRvbUNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpO1xuICB0b2dnbGVWaXNpYmxlKGZvcm0pO1xufVxuXG5mdW5jdGlvbiByZW1vdmVBbGxDaGlsZE5vZGVzKHBhcmVudClcbntcbiAgd2hpbGUgKHBhcmVudC5maXJzdENoaWxkKSB7XG4gICAgcmVtb3ZlRG9tKHBhcmVudC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVEb20obm9kZSl7XG4gIG5vZGUucmVtb3ZlKCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Qcm9qZWN0KHByb2plY3QpIHtcbiAgaWYgKHByb2plY3RNYW5hZ2VyLnNlbGVjdGVkUHJvamVjdCAhPSBudWxsKSB7XG4gICAgY29uc3QgaW5mbyA9IHByb2plY3RNYW5hZ2VyLnNlbGVjdGVkUHJvamVjdC5vdXJEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaW5mbycpWzBdO1xuICAgIHRvZ2dsZVZpc2libGUoaW5mbyk7XG4gIH1cblxuICBwcm9qZWN0TWFuYWdlci5zZWxlY3RlZFByb2plY3QgPSBwcm9qZWN0O1xuICBwcm9qZWN0Lm91clRvZG9zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBhZGRUb2RvRG9tKGVsZW1lbnQsIHRvZG9Gb3JtLCB0b2RvQ29udGFpbmVyKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyRG9tQ2hpbGRyZW4oZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XG4gICAgY29uc3QgYXJyYXkgPSBBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGRyZW4pO1xuICAgIGFycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG9nZ2xlVmlzaWJsZShlbGVtZW50KSB7XG4gIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcInZpc2libGVGb3JtXCIpO1xufVxuIl0sIm5hbWVzIjpbInByb2plY3RNYW5hZ2VyIiwicHJvamVjdExpc3QiLCJhZGRQcm9qZWN0IiwibmFtZSIsInByaW9yaXR5IiwiZHVlRGF0ZSIsImRlc2MiLCJuZXdQIiwib3VyVG9kb3MiLCJlZGl0UHJvamVjdCIsIl9uYW1lIiwiX3ByaW9yaXR5IiwiX2R1ZURhdGUiLCJfZGVzYyIsImdldE5hbWUiLCJnZXRQcmlvcml0eSIsImdldERhdGUiLCJnZXREZXNjIiwiYWRkVG9kbyIsIm5ld1RvZG8iLCJ0b2RvIiwicHVzaCIsImdldFRvZG9zIiwib3VyRGl2IiwiZGVsZXRlVG9kbyIsInRvZG9OYW1lIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJpIiwicHJvamVjdHMiLCJyZW1vdmVQcm9qZWN0IiwicHJvamVjdCIsIkZpbmRQcm9qZWN0IiwiZ2V0TGlzdCIsInNlbGVjdGVkUHJvamVjdCIsImFkZEVkaXRGb3JtIiwiZGl2IiwicHJvamVjdFRvRWRpdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxlbmd0aCIsImVkaXRGb3JtIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidGl0bGVCb3giLCJzZXRBdHRyaWJ1dGUiLCJkZXNjQm94IiwiZGF0ZUJveCIsInJhZGlvTG93IiwicmFkaW9NZWQiLCJyYWRpb0hpZ2giLCJzdWJtaXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImdldCIsInJlbW92ZUZvcm0iLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUJSIiwiY3JlYXRlTGFiZWwiLCJmb3JtIiwicmVtb3ZlIiwidGV4dCIsImVsZSIsImxhYmVsIiwibmV3UHJvamVjdEJ0biIsIm5ld1RvZG9CdG4iLCJwcm9qZWN0Q29udGFpbmVyIiwidG9kb0NvbnRhaW5lciIsInByb2plY3RGb3JtIiwidG9kb0Zvcm0iLCJwcm9qZWN0U2F2ZUJ0biIsInRvZG9TYXZlQnRuIiwiYWRkVG9kb0RvbSIsImRvbUNvbnRhaW5lciIsInRpdGxlIiwiZGV0YWlsZWRJbmZvIiwidG9nZ2xlVmlzaWJsZSIsImVkaXRCdG4iLCJkZWxldGVCdG4iLCJyZW1vdmVEb20iLCJub2RlIiwidG9nZ2xlIiwiZXZlbnQiLCJjb250YWluZXJUb0NsZWFyIiwiQXJyYXkiLCJmcm9tIiwiY2hpbGRyZW4iLCJvcGVuUHJvamVjdCIsInBhcmVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVBbGxDaGlsZE5vZGVzIiwiYWRkUHJvamVjdERvbSIsImZvcm1kYXRhIiwiY3JlYXRlTmV3UHJvamVjdCIsImNyZWF0ZU5ld1RvZG8iXSwic291cmNlUm9vdCI6IiJ9